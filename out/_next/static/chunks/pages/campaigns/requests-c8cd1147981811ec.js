(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{8216:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests",function(){return t(2601)}])},2601:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return U}});var n=t(7568),s=t(1438),a=t(2951),l=t(8029),i=t(460),c=t(7582),o=t(5893),d=t(7294),u=t(3544),p=t(7462),h=t(3871),v=t(6010),f=t(8459),m=t(8935),Z=t(2519),g=t(2248);function x(e){var r=e.children,t=e.className,n=(0,v.Z)(t),s=(0,m.Z)(x,e),a=(0,Z.Z)(x,e);return d.createElement(a,(0,p.Z)({},s,{className:n}),r)}x.handledProps=["as","children","className"],x.defaultProps={as:"tbody"},x.propTypes={};var b=x,w=t(9591),j=t(5150);function G(e){var r=e.active,t=e.children,n=e.className,s=e.collapsing,a=e.content,l=e.disabled,i=e.error,c=e.icon,o=e.negative,u=e.positive,h=e.selectable,x=e.singleLine,b=e.textAlign,w=e.verticalAlign,A=e.warning,N=e.width,k=(0,v.Z)((0,f.lG)(r,"active"),(0,f.lG)(s,"collapsing"),(0,f.lG)(l,"disabled"),(0,f.lG)(i,"error"),(0,f.lG)(o,"negative"),(0,f.lG)(u,"positive"),(0,f.lG)(h,"selectable"),(0,f.lG)(x,"single line"),(0,f.lG)(A,"warning"),(0,f.X4)(b),(0,f.Ok)(w),(0,f.H0)(N,"wide"),n),y=(0,m.Z)(G,e),C=(0,Z.Z)(G,e);return g.kK(t)?d.createElement(C,(0,p.Z)({},y,{className:k}),j.Z.create(c),a):d.createElement(C,(0,p.Z)({},y,{className:k}),t)}G.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],G.defaultProps={as:"td"},G.propTypes={},G.create=(0,w.u5)(G,(function(e){return{content:e}}));var A=G;function N(e){var r=e.children,t=e.className,n=e.content,s=e.fullWidth,a=(0,v.Z)((0,f.lG)(s,"full-width"),t),l=(0,m.Z)(N,e),i=(0,Z.Z)(N,e);return d.createElement(i,(0,p.Z)({},l,{className:a}),g.kK(r)?n:r)}N.handledProps=["as","children","className","content","fullWidth"],N.defaultProps={as:"thead"},N.propTypes={};var k=N;function y(e){var r=e.as,t=(0,m.Z)(y,e);return d.createElement(k,(0,p.Z)({},t,{as:r}))}y.handledProps=["as"],y.propTypes={},y.defaultProps={as:"tfoot"};var C=y;function P(e){var r=e.as,t=e.className,n=e.sorted,s=(0,v.Z)((0,f.cD)(n,"sorted"),t),a=(0,m.Z)(P,e);return d.createElement(A,(0,p.Z)({},a,{as:r,className:s}))}P.handledProps=["as","className","sorted"],P.propTypes={},P.defaultProps={as:"th"};var R=P;function E(e){var r=e.active,t=e.cellAs,n=e.cells,s=e.children,a=e.className,l=e.disabled,i=e.error,c=e.negative,o=e.positive,u=e.textAlign,x=e.verticalAlign,b=e.warning,w=(0,v.Z)((0,f.lG)(r,"active"),(0,f.lG)(l,"disabled"),(0,f.lG)(i,"error"),(0,f.lG)(c,"negative"),(0,f.lG)(o,"positive"),(0,f.lG)(b,"warning"),(0,f.X4)(u),(0,f.Ok)(x),a),j=(0,m.Z)(E,e),G=(0,Z.Z)(E,e);return g.kK(s)?d.createElement(G,(0,p.Z)({},j,{className:w}),(0,h.Z)(n,(function(e){return A.create(e,{defaultProps:{as:t}})}))):d.createElement(G,(0,p.Z)({},j,{className:w}),s)}E.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],E.defaultProps={as:"tr",cellAs:"td"},E.propTypes={},E.create=(0,w.u5)(E,(function(e){return{cells:e}}));var _=E;function q(e){var r=e.attached,t=e.basic,n=e.celled,s=e.children,a=e.className,l=e.collapsing,i=e.color,c=e.columns,o=e.compact,u=e.definition,x=e.fixed,w=e.footerRow,j=e.headerRow,G=e.headerRows,A=e.inverted,N=e.padded,y=e.renderBodyRow,P=e.selectable,R=e.singleLine,E=e.size,T=e.sortable,z=e.stackable,F=e.striped,H=e.structured,B=e.tableData,D=e.textAlign,L=e.unstackable,O=e.verticalAlign,X=(0,v.Z)("ui",i,E,(0,f.lG)(n,"celled"),(0,f.lG)(l,"collapsing"),(0,f.lG)(u,"definition"),(0,f.lG)(x,"fixed"),(0,f.lG)(A,"inverted"),(0,f.lG)(P,"selectable"),(0,f.lG)(R,"single line"),(0,f.lG)(T,"sortable"),(0,f.lG)(z,"stackable"),(0,f.lG)(F,"striped"),(0,f.lG)(H,"structured"),(0,f.lG)(L,"unstackable"),(0,f.sU)(r,"attached"),(0,f.sU)(t,"basic"),(0,f.sU)(o,"compact"),(0,f.sU)(N,"padded"),(0,f.X4)(D),(0,f.Ok)(O),(0,f.H0)(c,"column"),"table",a),K=(0,m.Z)(q,e),U=(0,Z.Z)(q,e);if(!g.kK(s))return d.createElement(U,(0,p.Z)({},K,{className:X}),s);var I={defaultProps:{cellAs:"th"}},W=(j||G)&&d.createElement(k,null,_.create(j,I),(0,h.Z)(G,(function(e){return _.create(e,I)})));return d.createElement(U,(0,p.Z)({},K,{className:X}),W,d.createElement(b,null,y&&(0,h.Z)(B,(function(e,r){return _.create(y(e,r))}))),w&&d.createElement(C,null,_.create(w)))}q.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],q.defaultProps={as:"table"},q.propTypes={},q.Body=b,q.Cell=A,q.Footer=C,q.Header=k,q.HeaderCell=R,q.Row=_;var T=q,z=t(967),F=t(6215),H=t(4148),B=t(4111),D=t(4924),L=t(1508),O=function(e){(0,l.Z)(t,e);var r=(0,i.Z)(t);function t(){var e;(0,s.Z)(this,t),e=r.apply(this,arguments);var a=(0,B.Z)(e);(0,D.Z)((0,B.Z)(e),"onApprove",(0,n.Z)((function(){var e,r;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return e=(0,H.Z)(a.props.address),[4,L.Z.eth.getAccounts()];case 1:return r=t.sent(),[4,e.methods.approveRequest(a.props.id).send({from:r[0]})];case 2:return t.sent(),[2]}}))})));var l=(0,B.Z)(e);return(0,D.Z)((0,B.Z)(e),"onFinalize",(0,n.Z)((function(){var e,r;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return e=(0,H.Z)(l.props.address),[4,L.Z.eth.getAccounts()];case 1:return r=t.sent(),[4,e.methods.finalizeRequest(l.props.id).send({from:r[0]})];case 2:return t.sent(),[2]}}))}))),e}return(0,a.Z)(t,[{key:"render",value:function(){var e=T.Row,r=T.Cell,t=this.props,n=t.id,s=t.request,a=t.approversCount,l=s.approvalCount>a/2;return(0,o.jsxs)(e,{disabled:s.complete,positive:l&&!s.complete,children:[(0,o.jsx)(r,{children:n}),(0,o.jsx)(r,{children:s.description}),(0,o.jsx)(r,{children:L.Z.utils.fromWei(s.value,"ether")}),(0,o.jsx)(r,{children:s.recipient}),(0,o.jsxs)(r,{children:[s.approvalCount,"/",a]}),(0,o.jsx)(r,{children:s.complete?null:(0,o.jsx)(z.Z,{color:"green",basic:!0,onClick:this.onApprove,children:"Approve"})}),(0,o.jsx)(r,{children:s.complete?null:(0,o.jsx)(z.Z,{color:"red",basic:!0,onClick:this.onFinalize,children:"Finalize"})})]})}}]),t}(d.Component),X=O,K=function(e){(0,l.Z)(t,e);var r=(0,i.Z)(t);function t(){return(0,s.Z)(this,t),r.apply(this,arguments)}return(0,a.Z)(t,[{key:"renderRows",value:function(){var e=this;return this.props.requests.map((function(r,t){return(0,o.jsx)(X,{id:t,request:r,address:e.props.address,approversCount:e.props.approversCount},t)}))}},{key:"render",value:function(){var e=T.Header,r=T.Row,t=T.HeaderCell,n=T.Body;return(0,o.jsxs)(u.Z,{children:[(0,o.jsx)("h3",{children:"Requests"}),(0,o.jsx)(F.Link,{route:"/campaigns/".concat(this.props.address,"/requests/new"),children:(0,o.jsx)("a",{children:(0,o.jsx)(z.Z,{primary:!0,floated:"right",style:{marginBottom:"10px"},children:"Add Request"})})}),(0,o.jsxs)(T,{children:[(0,o.jsx)(e,{children:(0,o.jsxs)(r,{children:[(0,o.jsx)(t,{children:"ID"}),(0,o.jsx)(t,{children:"Description"}),(0,o.jsx)(t,{children:"Amount"}),(0,o.jsx)(t,{children:"Recipient"}),(0,o.jsx)(t,{children:"Approval Count"}),(0,o.jsx)(t,{children:"Approve"}),(0,o.jsx)(t,{children:"Finalize"})]})}),(0,o.jsx)(n,{children:this.renderRows()})]}),(0,o.jsxs)("div",{children:["Found ",this.props.requestCount," requests."]})]})}}],[{key:"getInitialProps",value:function(e){return(0,n.Z)((function(){var r,t,n,s,a;return(0,c.__generator)(this,(function(l){switch(l.label){case 0:return r=e.query.address,[4,(t=(0,H.Z)(r)).methods.getRequestCount().call()];case 1:return n=l.sent(),[4,t.methods.approversCount().call()];case 2:return s=l.sent(),[4,Promise.all(Array(parseInt(n)).fill().map((function(e,r){return t.methods.requests(r).call()})))];case 3:return a=l.sent(),[2,{address:r,requests:a,requestCount:n,approversCount:s}]}}))}))()}}]),t}(d.Component),U=K}},function(e){e.O(0,[543,465,421,774,888,179],(function(){return r=8216,e(e.s=r);var r}));var r=e.O();_N_E=r}]);